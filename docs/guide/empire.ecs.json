{
  "family": "empire",
  "containerDefinitions": [
    {
      "name": "postgres",
      "image": "postgres",
      "cpu": 512,
      "memory": 256,
      "entryPoint": [],
      "environment": [],
      "command": [],
      "portMappings": [
        {
          "hostPort": 5432,
          "containerPort": 5432
        }
      ],
      "volumesFrom": [],
      "links": [],
      "mountPoints": [],
      "essential": true
    },
    {
      "name": "empire",
      "image": "remind101/empire:latest",
      "cpu": 512,
      "memory": 256,
      "entryPoint": [],
      "environment": [
        {
          "name": "AWS_REGION",
          "value": "us-east-1"
        },
        {
          "name": "EMPIRE_DATABASE_URL",
          "value": "postgres://postgres:postgres@postgres/postgres?sslmode=disable"
        },
        {
          "name": "EMPIRE_ELB_VPC_ID",
          "value": "<<VPC>>"
        },
        {
          "name": "EMPIRE_ELB_INTERNAL_SG",
          "value": "<<InternalELBSG>>"
        },
        {
          "name": "EMPIRE_ELB_EXTERNAL_SG",
          "value": "<<ExternalELBSG>>"
        }
      ],
      "command": ["server", "-automigrate=true"],
      "portMappings": [
        {
          "hostPort": 8080,
          "containerPort": 8080
        }
      ],
      "volumesFrom": [],
      "links": [
        "postgres:postgres"
      ],
      "mountPoints": [
        {
          "sourceVolume": "dockerSocket",
          "containerPath": "/var/run/docker.sock",
          "readOnly": false
        },
        {
          "sourceVolume": "dockerCfg",
          "containerPath": "/root/.dockercfg",
          "readOnly": false
        }
      ],
      "essential": true
    }
  ],
  "volumes": [
    {
      "name": "dockerSocket",
      "host": {
        "sourcePath": "/var/run/docker.sock"
      }
    },
    {
      "name": "dockerCfg",
      "host": {
        "sourcePath": "/home/ec2-user/.dockercfg"
      }
    }
  ]
}
